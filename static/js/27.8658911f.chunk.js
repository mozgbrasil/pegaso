(this["webpackJsonp@mozg/react-pegaso"]=this["webpackJsonp@mozg/react-pegaso"]||[]).push([[27],{594:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var o=n(8),a=n(11),r=n(9),i=n(10),c=n(0),l=n.n(c),s=[],u=console.log;console.log=function log(){u.apply(console,["[".concat((new Date).toISOString().replace("T"," ").replace(/\..+/,""),"]")].concat(Array.prototype.slice.call(arguments))),s.push.apply(s,arguments)};var d=function(e){Object(r.a)(WebApis,e);var t=Object(i.a)(WebApis);function WebApis(e){var n;return Object(o.a)(this,WebApis),(n=t.call(this,e)).state={json:!1},n}return Object(a.a)(WebApis,[{key:"componentDidMount",value:function componentDidMount(){var e={log:function log(){var e=Array.prototype.slice.call(arguments).map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" ");document.querySelector("#log").textContent+=e+"\n"},clearLog:function clearLog(){document.querySelector("#log").textContent=""},setStatus:function setStatus(e){document.querySelector("#status").textContent=e},setContent:function setContent(e){for(var t=document.querySelector("#content");t.hasChildNodes();)t.removeChild(t.lastChild);t.appendChild(e)}};if(window.addEventListener("error",(function(t){e&&e.setStatus&&(console.error(t),e.setStatus(t.message+" (Your browser may not support this feature.)"),t.preventDefault())})),"ondevicelight"in window?window.addEventListener("devicelight",(function(e){var t=document.querySelector("body");e.value<50?(t.classList.add("darklight"),t.classList.remove("brightlight")):(t.classList.add("brightlight"),t.classList.remove("darklight"))})):console.log("devicelight event not supported"),"bluetooth"in navigator&&navigator.bluetooth.requestDevice){navigator.bluetooth.requestDevice({filters:[{services:["heart_rate"]},{services:[6146,6147]},{services:["c48e6067-5295-48d3-8d5c-0395f61792b1"]},{name:"ExampleName"},{namePrefix:"Prefix"}],optionalServices:["battery_service"]}).then((function(e){console.log("Name: "+e.name)})).catch((function(e){console.log("Something went wrong. "+e)}))}else console.log("Fail: navigator.bluetooth.requestDevice");var t;function drawCanvas(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];var n=Math.min(e.width/t.width,e.height/t.height),o=(e.width-t.width*n)/2,a=(e.height-t.height*n)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,o,a,t.width*n,t.height*n)}function report(e){console.log("Permission "+e)}fetch("https://express.mozgbrasil.now.sh/").then((function(e){if(200===e.status)return e.json();throw new Error("Something went wrong on api server!")})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),document.querySelector("#find-me").addEventListener("click",(function geoFindMe(){var e=document.querySelector("#geo_status"),t=document.querySelector("#geo_map_link");t.href="",t.textContent="",navigator.geolocation?(e.textContent="Locating\u2026",navigator.geolocation.getCurrentPosition((function success(n){var o=n.coords.latitude,a=n.coords.longitude;e.textContent="",t.href="https://www.openstreetmap.org/#map=18/".concat(o,"/").concat(a),t.textContent="Latitude: ".concat(o," \xb0, Longitude: ").concat(a," \xb0")}),(function error(){e.textContent="Unable to retrieve your location"}))):e.textContent="Geolocation is not supported by your browser"})),document.querySelector("#getUserMediaButton").addEventListener("click",(function onGetUserMediaButtonClick(){navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){document.querySelector("video").srcObject=e;var n=e.getVideoTracks()[0];t=new ImageCapture(n)})).catch((function(e){return console.log(e)}))})),document.querySelector("#grabFrameButton").addEventListener("click",(function onGrabFrameButtonClick(){t.grabFrame().then((function(e){drawCanvas(document.querySelector("#grabFrameCanvas"),e)})).catch((function(e){return console.log(e)}))})),document.querySelector("#takePhotoButton").addEventListener("click",(function onTakePhotoButtonClick(){t.takePhoto().then((function(e){return createImageBitmap(e)})).then((function(e){drawCanvas(document.querySelector("#takePhotoCanvas"),e)})).catch((function(e){return console.log(e)}))})),function handlePermission(){navigator.permissions.query({name:"geolocation"}).then((function(e){("granted"===e.state||"prompt"===e.state||"denied"===e.state)&&report(e.state),e.onchange=function(){report(e.state)}}))}(),window.addEventListener("userproximity",(function(e){e.near?navigator.mozPower.screenEnabled=!1:navigator.mozPower.screenEnabled=!0})),("vibrate"in window.navigator||"mozVibrate"in window.navigator)&&window.navigator.vibrate(200);var n=s,o=[];Object.entries(n).forEach((function(e){var t=e[1];"string"===typeof t&&o.push(t)})),n=o;var a=JSON.stringify(n);this.setState({json:a})}},{key:"render",value:function render(){return l.a.createElement(l.a.Fragment,null,void 0,l.a.createElement("span",null,l.a.createElement("hr",null)),"Console",l.a.createElement("span",null,l.a.createElement("hr",null)),l.a.createElement("code",null,this.state.json),l.a.createElement("span",null,l.a.createElement("hr",null)),"Geolocation",l.a.createElement("span",null,l.a.createElement("hr",null)),l.a.createElement("button",{id:"find-me"},"Show my location"),l.a.createElement("br",null),l.a.createElement("p",{id:"geo_status"},"\xa0"),l.a.createElement("a",{id:"geo_map_link",href:"#top",target:"_blank",rel:"noopener noreferrer"},"\xa0"),l.a.createElement("span",null,l.a.createElement("hr",null)),"ImageCapture",l.a.createElement("span",null,l.a.createElement("hr",null)),l.a.createElement("h1",null,"Image Capture / Grab Frame - Take Photo Sample"),l.a.createElement("div",{id:"results"},l.a.createElement("div",null,l.a.createElement("video",{autoPlay:""}),l.a.createElement("button",{id:"getUserMediaButton"},"Get User Media")),l.a.createElement("div",null,l.a.createElement("canvas",{id:"grabFrameCanvas",width:"264",height:"198"}),l.a.createElement("button",{id:"grabFrameButton"},"Grab Frame")),l.a.createElement("div",null,l.a.createElement("canvas",{id:"takePhotoCanvas",width:"264",height:"198"}),l.a.createElement("button",{id:"takePhotoButton"},"Take Photo"))),l.a.createElement("h3",null,"Live Output"),l.a.createElement("div",{id:"output",className:"output"},l.a.createElement("div",{id:"content"}),l.a.createElement("div",{id:"status"}),l.a.createElement("pre",{id:"log"})),l.a.createElement("span",null,l.a.createElement("hr",null)))}}]),WebApis}(l.a.Component)}}]);